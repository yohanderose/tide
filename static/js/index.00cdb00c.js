(()=>{"use strict";var e,t,s,r,a={292:function(e,t,s){let r,a;var l=s(848),n=s(540),o=s(338),i=s(44),d=s(189),c=s(870),m=s(483),u=s(334),x=s(676),g=s(73),h=s(764),p=s(345),b=s(368),f=s(52),y=s(309),w=s(894),v=s(697),j=s(568),N=s(543),S=s(398);let O=()=>new Promise((e,t)=>{let s=indexedDB.open("TideDB",1);s.onerror=()=>t(s.error),s.onsuccess=()=>e(s.result),s.onupgradeneeded=e=>{let t=e.target.result;if(t.objectStoreNames.contains("userData")||t.createObjectStore("userData",{keyPath:"id"}),!t.objectStoreNames.contains("entries")){let e=t.createObjectStore("entries",{keyPath:"id"});e.createIndex("date","date",{unique:!1}),e.createIndex("userId","userId",{unique:!1})}}}),k=async(e,t)=>{let s=await O();return new Promise((r,a)=>{let l=s.transaction([e],"readwrite").objectStore(e).put(t);l.onsuccess=()=>r(l.result),l.onerror=()=>a(l.error)})},D=async(e,t)=>{let s=await O();return new Promise((r,a)=>{let l=s.transaction([e],"readonly").objectStore(e).get(t);l.onsuccess=()=>r(l.result),l.onerror=()=>a(l.error)})},P=async e=>{let t=await O();return new Promise((s,r)=>{let a=t.transaction([e],"readonly").objectStore(e).getAll();a.onsuccess=()=>s(a.result),a.onerror=()=>r(a.error)})},A=[{id:"cramps",label:"Cramps",icon:c.A,color:"text-red-500"},{id:"headache",label:"Headache",icon:m.A,color:"text-purple-500"},{id:"bloating",label:"Bloating",icon:u.A,color:"text-blue-500"},{id:"fatigue",label:"Fatigue",icon:x.A,color:"text-indigo-500"},{id:"mood",label:"Mood Changes",icon:g.A,color:"text-yellow-500"},{id:"acne",label:"Acne",icon:h.A,color:"text-green-500"},{id:"tender",label:"Tender Breasts",icon:p.A,color:"text-pink-500"},{id:"backache",label:"Back Pain",icon:b.A,color:"text-gray-500"}],C=["spotting","light","medium","heavy"],$=new Set;o.createRoot(document.getElementById("root")).render((0,l.jsxs)(n.StrictMode,{children:[(0,l.jsx)(function(){let[e,t]=(0,n.useState)(null),[s,o]=(0,n.useState)([]),[i,c]=(0,n.useState)(null),[m,u]=(0,n.useState)({}),[x,g]=(0,n.useState)(null),[h,p]=(0,n.useState)(null),[b,I]=(0,n.useState)(null),[T,F]=(0,n.useState)(null),[M,R]=(0,n.useState)(!1),[E,B]=(0,n.useState)({isPeriod:!1,isOvulating:!1,flow:"",symptoms:[],notes:""}),Y=(0,n.useRef)(null),L=(0,n.useRef)(!1),U=(0,n.useRef)(null);(0,n.useEffect)(()=>{H(),V(),z().then(e=>{Y.current.scrollTo({top:Y.current.scrollHeight/1.8,behavior:"smooth"})})},[]),(0,n.useEffect)(()=>{(async()=>{F(await d.wV.create("/tide/xgb_model.onnx"))})()},[]),(0,n.useEffect)(()=>{if(null==T||0===$.size)return;if($.size<2){let e=new Date(h);e.setDate(e.getDate()+28),I(t=>e.toISOString().split("T")[0]);return}let e=setTimeout(async()=>{let e,t,s,r,a=0,l=[];$.forEach(e=>{let[t,s]=e.split(":");a+=Number(s),l.push(Number(s))}),s=l.at(-2),r=l.at(-1),e=a/l.length,t=Math.sqrt(l.reduce((t,s)=>t+(s-e)**2,0)/(l.length-1));let n=[e,t,s,r],o=T.inputNames[0],i=[1,n.length],c=new d.qY("float32",Float32Array.from(n),i),m=Math.round((await T.run({[o]:c}))[T.outputNames[0]].data[0]||28),u=new Date(h);u.setDate(u.getDate()+m),I(e=>u.toISOString().split("T")[0])},2e3);return()=>clearTimeout(e)},[x,h,T]);let z=async()=>{let e=new Date,t=[];for(let s=-3;s<=6;s++)t.push(new Date(e.getFullYear(),e.getMonth()+s,1));o(t)},q=(0,n.useCallback)(e=>{L.current||(L.current=!0,o(t=>{let s=[...t];if("past"===e){let e=s[0];for(let t=3;t>=1;t--)s.unshift(new Date(e.getFullYear(),e.getMonth()-t,1))}else{let e=s[s.length-1];for(let t=1;t<=3;t++)s.push(new Date(e.getFullYear(),e.getMonth()+t,1))}return s}),setTimeout(()=>{L.current=!1},100))},[]),_=(0,n.useCallback)(e=>{let{scrollTop:t,scrollHeight:s,clientHeight:r}=e.target;t<200&&q("past"),s-t-r<200&&q("future")},[q]),H=async()=>{let e=await D("userData","currentUser");e||(e={id:"currentUser",userId:(0,S.A)(),createdAt:new Date().toISOString()},await k("userData",e)),t(e.userId)},J=e=>{let t=new Date(e);return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]},W=e=>{let t=null,s=null;for(let[a,l]of Object.entries(e)){var r;(null==t||a<t)&&(t=a),l.isPeriod&&!(null==(r=e[J(a)])?void 0:r.isPeriod)&&(null==s||a>s)&&(s=a)}g(t),p(s)},V=async()=>{let e=await P("entries"),t={};e.forEach(e=>{t[e.date]=e}),u(t),W(t)},G=(e,t,s)=>`${e}-${String(t+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,K=(e,t)=>{let s=G(t.getFullYear(),t.getMonth(),e);c(s);let r=m[s];B(r?{isPeriod:r.isPeriod,isOvulating:r.isOvulating,flow:r.flow||"",symptoms:r.symptoms||[],notes:r.notes||""}:{isPeriod:!1,isOvulating:!1,flow:"",symptoms:[],notes:""}),R(!0)},Q=async()=>{let t={id:`${e}_${i}`,userId:e,date:i,...E,updatedAt:new Date().toISOString()};await k("entries",t),u(e=>{let s={...e,[i]:t};return W(s),s}),R(!1)},X=async()=>{let t=(await O()).transaction(["entries"],"readwrite").objectStore("entries");await t.delete(`${e}_${i}`),u(e=>{let t={...e};return delete t[i],W(t),t}),R(!1)};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-gray100 to-blue-50",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto p-4 sm:p-6",children:[(0,l.jsxs)("div",{className:"flex justify-between gap-2 sm:gap-3 mb-6 sm:mb-8",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-rose-400 to-pink-500 rounded-2xl flex items-center justify-center",children:(0,l.jsx)(f.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,l.jsx)("div",{children:(0,l.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Tide"})})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("button",{onClick:()=>{let e=new Blob([JSON.stringify(m,null,2)],{type:"text/json"}),t=URL.createObjectURL(e),s=new Date().toISOString().split("T")[0],r=document.createElement("a");r.href=t,r.download=`${s}_tide.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(t)},children:(0,l.jsx)(y.A,{})}),(0,l.jsxs)("button",{onClick:()=>{var e;return null==(e=U.current)?void 0:e.click()},children:[(0,l.jsx)(w.A,{}),(0,l.jsx)("input",{type:"file",accept:"application/json",ref:U,style:{display:"none"},onChange:e=>{let t=e.target.files[0];if(!t)return;let s=new FileReader;s.onload=async e=>{try{let t=JSON.parse(e.target.result);for(let[e,s]of Object.entries(t))await k("entries",s);u(t)}catch(e){console.error("Error parsing JSON import:",e)}},s.readAsText(t)}})]})]})]}),(0,l.jsx)("div",{ref:Y,onScroll:_,className:"h-[calc(100vh-120px)] sm:h-[calc(100vh-140px)] overflow-y-auto",children:(0,l.jsx)("div",{className:"space-y-6 sm:space-y-8",children:s.map((e,t)=>(0,l.jsx)("div",{children:(e=>{var t;let s,n,o,{daysInMonth:i,startingDayOfWeek:d,year:c,month:u}=(s=e.getFullYear(),o=new Date(s,n=e.getMonth(),1),{daysInMonth:new Date(s,n+1,0).getDate(),startingDayOfWeek:o.getDay(),year:s,month:n}),g=e.toLocaleString("default",{month:"long",year:"numeric"}),p=[];for(let e=0;e<d;e++)p.push((0,l.jsx)("div",{className:"h-10 sm:h-12 md:h-14"},`empty-${e}`));for(let s=1;s<=i;s++){let n=G(c,u,s),o=m[n],i=n===G(new Date().getFullYear(),new Date().getMonth(),new Date().getDate());n>=x&&(b&&n<=b||n<=new Date().toISOString().split("T")[0])?(null==o?void 0:o.isPeriod)&&!(null==(t=m[J(n)])?void 0:t.isPeriod)?(r&&a&&$.add([a,r].join(":")),r=1,a=n):r++:r=0,p.push((0,l.jsxs)("button",{onClick:()=>K(s,e),className:`h-10 grid grid-cols-3 grid-rows-3 transition-all hover:bg-rose-50 relative
    ${i?"text-primary":""}
  ${(null==o?void 0:o.isOvulating)?"rounded-full text-yellow-800 bg-yellow-200":""}
  ${(null==o?void 0:o.isPeriod)?"rounded-full text-rose-800 "+((null==o?void 0:o.flow)==C[0]?"bg-rose-50":(null==o?void 0:o.flow)==C[1]?"bg-rose-100":(null==o?void 0:o.flow)==C[2]?"bg-rose-200":(null==o?void 0:o.flow)==C[3]?"bg-rose-300":""):""}
  `,children:[(0,l.jsx)("div",{className:`absolute inset-0 m-auto w-10 h-10 z-10 pointer-events-none flex items-center justify-center opacity-50
  ${b&&n==b?"rounded-full outline-dotted outline-6 outline-rose-800 animate-spin [animation-duration:12s]":""}
  `}),x&&h&&r>0&&(0,l.jsx)("div",{className:"text-[0.6rem] text-gray-500 col-start-1 row-start-1 self-start justify-self-start p-0.5",children:r}),(0,l.jsx)("span",{className:"text-base col-start-2 row-start-2 self-center justify-self-center",children:s}),(null==o?void 0:o.symptoms)&&o.symptoms.length>0&&(0,l.jsx)("div",{className:"col-start-3 row-start-1 self-start justify-self-end p-1",children:(0,l.jsx)("div",{className:"w-1.5 h-1.5 bg-primary rounded-full"})})]},s))}return(0,l.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,l.jsx)("h2",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 text-gray-800",children:g}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 mb-2",children:["S","M","T","W","T","F","S"].map((e,t)=>(0,l.jsx)("div",{className:"text-center text-xs font-medium text-gray-500",children:e},t))}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:p})]})})(e)},`${e.getFullYear()}-${e.getMonth()}-${t}`))})}),M&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,l.jsx)("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[(0,l.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:new Date(i).toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric"})}),(0,l.jsx)("button",{onClick:()=>R(!1),className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)(v.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,l.jsxs)("div",{className:"space-y-4 sm:space-y-4",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("label",{className:`flex items-center gap-2 sm:gap-3 cursor-pointer p-3 sm:p-4 rounded-xl border-2 transition-all
                      ${E.isOvulating?"border-yellow-400 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,l.jsx)("input",{type:"checkbox",checked:E.isOvulating,onChange:e=>B(t=>({...t,isOvulating:e.target.checked})),className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 rounded"}),(0,l.jsx)(j.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500"}),(0,l.jsx)("span",{className:"text-sm sm:text-base font-medium text-gray-900",children:"Ovulation day"})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)("label",{className:`flex items-center gap-2 sm:gap-3 cursor-pointer p-3 sm:p-4 rounded-xl border-2 transition-all
                      ${E.isPeriod?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,l.jsx)("input",{type:"checkbox",checked:E.isPeriod,onChange:e=>B(t=>({...t,isPeriod:e.target.checked,flow:e.target.checked?C[1]:""})),className:"w-4 h-4 sm:w-5 sm:h-5 text-rose-500 rounded"}),(0,l.jsx)(N.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-rose-500"}),(0,l.jsx)("span",{className:"text-sm sm:text-base font-medium text-gray-900",children:"Period day"})]})}),E.isPeriod&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Flow level"}),(0,l.jsx)("div",{className:"grid grid-cols-2 sm:flex gap-2",children:C.map(e=>(0,l.jsx)("button",{onClick:()=>B(t=>({...t,flow:e})),className:`flex-1 py-2 px-2 sm:px-3 rounded-lg text-xs sm:text-sm font-medium transition-all capitalize
                              ${E.flow===e?"bg-rose-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 sm:mb-3",children:"Symptoms"}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:A.map(e=>{let t=e.icon,s=E.symptoms.includes(e.id);return(0,l.jsxs)("button",{onClick:()=>{var t;return t=e.id,void B(e=>({...e,symptoms:e.symptoms.includes(t)?e.symptoms.filter(e=>e!==t):[...e.symptoms,t]}))},className:`p-2 sm:p-3 rounded-lg text-left transition-all flex items-center gap-2
                              ${s?"bg-blue-50 border-2 border-blue-400":"bg-gray-50 border-2 border-transparent hover:bg-gray-100"}`,children:[(0,l.jsx)(t,{className:`w-3 h-3 sm:w-4 sm:h-4 ${s?e.color:"text-gray-400"}`}),(0,l.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:e.label})]},e.id)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,l.jsx)("textarea",{value:E.notes,onChange:e=>B(t=>({...t,notes:e.target.value})),placeholder:"Add any additional notes...",className:"w-full p-2 sm:p-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-400 focus:border-transparent",rows:"3"})]}),(0,l.jsxs)("div",{className:"flex gap-2 sm:gap-3",children:[(0,l.jsx)("button",{disabled:E.isPeriod&&""==E.flow,onClick:Q,className:"disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed flex-1 bg-rose-500 text-white py-2.5 sm:py-3 rounded-lg text-sm sm:text-base font-medium hover:bg-rose-600 transition-colors",children:"Save"}),m[i]&&(0,l.jsx)("button",{onClick:X,className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-gray-100 text-gray-700 rounded-lg text-sm sm:text-base font-medium hover:bg-gray-200 transition-colors",children:"Delete"})]})]})]})})})]})})},{}),(0,l.jsx)(i.N9,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]}))}},l={};function n(e){var t=l[e];if(void 0!==t)return t.exports;var s=l[e]={exports:{}};return a[e](s,s.exports,n),s.exports}n.m=a,n.d=(e,t)=>{for(var s in t)n.o(t,s)&&!n.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=[],n.O=(t,s,r,a)=>{if(s){a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[s,r,a];return}for(var o=1/0,l=0;l<e.length;l++){for(var[s,r,a]=e[l],i=!0,d=0;d<s.length;d++)(!1&a||o>=a)&&Object.keys(n.O).every(e=>n.O[e](s[d]))?s.splice(d--,1):(i=!1,a<o&&(o=a));if(i){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t},n.p="/tide/",n.b=document.baseURI||self.location.href,t={410:0},n.O.j=e=>0===t[e],s=(e,s)=>{var r,a,[l,o,i]=s,d=0;if(l.some(e=>0!==t[e])){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(i)var c=i(n)}for(e&&e(s);d<l.length;d++)a=l[d],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(c)},(r=self.webpackChunktide=self.webpackChunktide||[]).forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r));var o=n.O(void 0,["783","712"],()=>n(292));o=n.O(o)})();