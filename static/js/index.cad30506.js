(()=>{"use strict";var e,t,s,r,a={292:function(e,t,s){let r,a;var l=s(848),o=s(540),n=s(338),i=s(44),d=s(189),c=s(870),m=s(483),u=s(334),x=s(676),g=s(73),h=s(764),b=s(345),p=s(368),f=s(52),y=s(697),w=s(568),v=s(543),j=s(398);let N=()=>new Promise((e,t)=>{let s=indexedDB.open("TideDB",1);s.onerror=()=>t(s.error),s.onsuccess=()=>e(s.result),s.onupgradeneeded=e=>{let t=e.target.result;if(t.objectStoreNames.contains("userData")||t.createObjectStore("userData",{keyPath:"id"}),!t.objectStoreNames.contains("entries")){let e=t.createObjectStore("entries",{keyPath:"id"});e.createIndex("date","date",{unique:!1}),e.createIndex("userId","userId",{unique:!1})}}}),S=async(e,t)=>{let s=await N();return new Promise((r,a)=>{let l=s.transaction([e],"readwrite").objectStore(e).put(t);l.onsuccess=()=>r(l.result),l.onerror=()=>a(l.error)})},D=async(e,t)=>{let s=await N();return new Promise((r,a)=>{let l=s.transaction([e],"readonly").objectStore(e).get(t);l.onsuccess=()=>r(l.result),l.onerror=()=>a(l.error)})},O=async e=>{let t=await N();return new Promise((s,r)=>{let a=t.transaction([e],"readonly").objectStore(e).getAll();a.onsuccess=()=>s(a.result),a.onerror=()=>r(a.error)})},k=[{id:"cramps",label:"Cramps",icon:c.A,color:"text-red-500"},{id:"headache",label:"Headache",icon:m.A,color:"text-purple-500"},{id:"bloating",label:"Bloating",icon:u.A,color:"text-blue-500"},{id:"fatigue",label:"Fatigue",icon:x.A,color:"text-indigo-500"},{id:"mood",label:"Mood Changes",icon:g.A,color:"text-yellow-500"},{id:"acne",label:"Acne",icon:h.A,color:"text-green-500"},{id:"tender",label:"Tender Breasts",icon:b.A,color:"text-pink-500"},{id:"backache",label:"Back Pain",icon:p.A,color:"text-gray-500"}],P=["spotting","light","medium","heavy"],$=new Set;n.createRoot(document.getElementById("root")).render((0,l.jsxs)(o.StrictMode,{children:[(0,l.jsx)(function(){let[e,t]=(0,o.useState)(null),[s,n]=(0,o.useState)([]),[i,c]=(0,o.useState)(null),[m,u]=(0,o.useState)({}),[x,g]=(0,o.useState)(null),[h,b]=(0,o.useState)(null),[p,A]=(0,o.useState)(null),[C,I]=(0,o.useState)(null),[T,M]=(0,o.useState)(!1),[F,Y]=(0,o.useState)({isPeriod:!1,isOvulating:!1,flow:"",symptoms:[],notes:""}),B=(0,o.useRef)(null),E=(0,o.useRef)(!1);(0,o.useEffect)(()=>{H(),_(),q().then(e=>{B.current.scrollTo({top:B.current.scrollHeight/1.8,behavior:"smooth"})})},[]),(0,o.useEffect)(()=>{(async()=>{I(await d.wV.create("/xgb_model.onnx"))})()},[]),(0,o.useEffect)(()=>{if(null==C||0===$.size)return;if($.size<2){let e=new Date(h);e.setDate(e.getDate()+28),A(t=>e.toISOString().split("T")[0]);return}let e=setTimeout(async()=>{let e,t,s,r,a=0,l=[];$.forEach(e=>{let[t,s]=e.split(":");a+=Number(s),l.push(Number(s))}),s=l.at(-2),r=l.at(-1),e=a/l.length,t=Math.sqrt(l.reduce((t,s)=>t+(s-e)**2,0)/(l.length-1));let o=[e,t,s,r],n=C.inputNames[0],i=[1,o.length],c=new d.qY("float32",Float32Array.from(o),i),m=Math.round((await C.run({[n]:c}))[C.outputNames[0]].data[0]||28),u=new Date(h);u.setDate(u.getDate()+m),A(e=>u.toISOString().split("T")[0])},2e3);return()=>clearTimeout(e)},[x,h,C]);let q=async()=>{let e=new Date,t=[];for(let s=-3;s<=6;s++)t.push(new Date(e.getFullYear(),e.getMonth()+s,1));n(t)},z=(0,o.useCallback)(e=>{E.current||(E.current=!0,n(t=>{let s=[...t];if("past"===e){let e=s[0];for(let t=3;t>=1;t--)s.unshift(new Date(e.getFullYear(),e.getMonth()-t,1))}else{let e=s[s.length-1];for(let t=1;t<=3;t++)s.push(new Date(e.getFullYear(),e.getMonth()+t,1))}return s}),setTimeout(()=>{E.current=!1},100))},[]),R=(0,o.useCallback)(e=>{let{scrollTop:t,scrollHeight:s,clientHeight:r}=e.target;t<200&&z("past"),s-t-r<200&&z("future")},[z]),H=async()=>{let e=await D("userData","currentUser");e||(e={id:"currentUser",userId:(0,j.A)(),createdAt:new Date().toISOString()},await S("userData",e)),t(e.userId)},L=e=>{let t=new Date(e);return t.setDate(t.getDate()-1),t.toISOString().split("T")[0]},U=e=>{let t=null,s=null;for(let[a,l]of Object.entries(e)){var r;(null==t||a<t)&&(t=a),l.isPeriod&&!(null==(r=e[L(a)])?void 0:r.isPeriod)&&(null==s||a>s)&&(s=a)}g(t),b(s)},_=async()=>{let e=await O("entries"),t={};e.forEach(e=>{t[e.date]=e}),u(t),U(t)},W=(e,t,s)=>`${e}-${String(t+1).padStart(2,"0")}-${String(s).padStart(2,"0")}`,V=(e,t)=>{let s=W(t.getFullYear(),t.getMonth(),e);c(s);let r=m[s];Y(r?{isPeriod:r.isPeriod,isOvulating:r.isOvulating,flow:r.flow||"",symptoms:r.symptoms||[],notes:r.notes||""}:{isPeriod:!1,isOvulating:!1,flow:"",symptoms:[],notes:""}),M(!0)},G=async()=>{let t={id:`${e}_${i}`,userId:e,date:i,...F,updatedAt:new Date().toISOString()};new Date(i)<x?g(i):g(x),await S("entries",t),u(e=>{let s={...e,[i]:t};return U(s),s}),M(!1)},J=async()=>{let t=(await N()).transaction(["entries"],"readwrite").objectStore("entries");await t.delete(`${e}_${i}`),u(e=>{let t={...e};return delete t[i],U(t),t}),M(!1)};return(0,l.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-rose-50 via-gray100 to-blue-50",children:(0,l.jsxs)("div",{className:"max-w-2xl mx-auto p-4 sm:p-6",children:[(0,l.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 mb-6 sm:mb-8",children:[(0,l.jsx)("div",{className:"w-8 h-8 sm:w-10 sm:h-10 bg-gradient-to-br from-rose-400 to-pink-500 rounded-2xl flex items-center justify-center",children:(0,l.jsx)(f.A,{className:"w-5 h-5 sm:w-6 sm:h-6 text-white"})}),(0,l.jsx)("div",{children:(0,l.jsx)("h1",{className:"text-xl sm:text-2xl font-bold text-gray-900",children:"Tide"})})]}),(0,l.jsx)("div",{ref:B,onScroll:R,className:"h-[calc(100vh-120px)] sm:h-[calc(100vh-140px)] overflow-y-auto",children:(0,l.jsx)("div",{className:"space-y-6 sm:space-y-8",children:s.map((e,t)=>(0,l.jsx)("div",{children:(e=>{var t;let s,o,n,{daysInMonth:i,startingDayOfWeek:d,year:c,month:u}=(s=e.getFullYear(),n=new Date(s,o=e.getMonth(),1),{daysInMonth:new Date(s,o+1,0).getDate(),startingDayOfWeek:n.getDay(),year:s,month:o}),g=e.toLocaleString("default",{month:"long",year:"numeric"}),b=[];for(let e=0;e<d;e++)b.push((0,l.jsx)("div",{className:"h-10 sm:h-12 md:h-14"},`empty-${e}`));for(let s=1;s<=i;s++){let o=W(c,u,s),n=m[o],i=o===W(new Date().getFullYear(),new Date().getMonth(),new Date().getDate());o>=x&&(p&&o<=p||o<=new Date().toISOString().split("T")[0])?(null==n?void 0:n.isPeriod)&&!(null==(t=m[L(o)])?void 0:t.isPeriod)?(r&&a&&$.add([a,r].join(":")),r=1,a=o):r++:r=0,b.push((0,l.jsxs)("button",{onClick:()=>V(s,e),className:`h-10 sm:h-12 md:h-14 rounded-full flex flex-col items-center justify-center transition-all hover:bg-rose-50 relative
            ${i?"text-primary":""}
            ${p&&o==p?"outline-dotted outline-4 outline-rose-400 ":""}
            ${(null==n?void 0:n.isPeriod)?(null==n?void 0:n.flow)==P[0]?"bg-rose-100":(null==n?void 0:n.flow)==P[1]?"bg-rose-200":(null==n?void 0:n.flow)==P[2]?"bg-rose-300":(null==n?void 0:n.flow)==P[3]?"bg-rose-400":"":""}
            ${(null==n?void 0:n.isOvulating)?"bg-yellow-200":""}
          `,children:[(0,l.jsx)("span",{className:"text-s sm:text-m",children:s}),(null==n?void 0:n.symptoms)&&n.symptoms.length>0&&(0,l.jsx)("div",{className:"absolute top-0.5 sm:top-1 right-0.5 sm:right-1 w-1 h-1 sm:w-2 sm:h-2 bg-primary rounded-full"}),x&&h&&r>0&&(0,l.jsx)("div",{className:"absolute bottom-0.5 sm:bottom-1 right-0.5 sm:right-1 w-1 h-1 sm:w-2 sm:h-2 text-xs sm:text-xs text-gray-400",children:r})]},s))}return(0,l.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,l.jsx)("h2",{className:"text-base sm:text-lg font-semibold mb-3 sm:mb-4 text-gray-800",children:g}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2 mb-2",children:["S","M","T","W","T","F","S"].map((e,t)=>(0,l.jsx)("div",{className:"text-center text-xs font-medium text-gray-500",children:e},t))}),(0,l.jsx)("div",{className:"grid grid-cols-7 gap-1 sm:gap-2",children:b})]})})(e)},`${e.getFullYear()}-${e.getMonth()}-${t}`))})}),T&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,l.jsx)("div",{className:"bg-white rounded-2xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,l.jsxs)("div",{className:"p-4 sm:p-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4 sm:mb-6",children:[(0,l.jsx)("h3",{className:"text-lg sm:text-xl font-semibold text-gray-900",children:new Date(i).toLocaleDateString("default",{month:"long",day:"numeric",year:"numeric"})}),(0,l.jsx)("button",{onClick:()=>M(!1),className:"text-gray-400 hover:text-gray-600",children:(0,l.jsx)(y.A,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),(0,l.jsxs)("div",{className:"space-y-4 sm:space-y-4",children:[(0,l.jsx)("div",{children:(0,l.jsxs)("label",{className:`flex items-center gap-2 sm:gap-3 cursor-pointer p-3 sm:p-4 rounded-xl border-2 transition-all
                      ${F.isOvulating?"border-yellow-400 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,l.jsx)("input",{type:"checkbox",checked:F.isOvulating,onChange:e=>Y(t=>({...t,isOvulating:e.target.checked})),className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500 rounded"}),(0,l.jsx)(w.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-yellow-500"}),(0,l.jsx)("span",{className:"text-sm sm:text-base font-medium text-gray-900",children:"Ovulation day"})]})}),(0,l.jsx)("div",{children:(0,l.jsxs)("label",{className:`flex items-center gap-2 sm:gap-3 cursor-pointer p-3 sm:p-4 rounded-xl border-2 transition-all
                      ${F.isPeriod?"border-rose-400 bg-rose-50":"border-gray-200 hover:border-gray-300"}`,children:[(0,l.jsx)("input",{type:"checkbox",checked:F.isPeriod,onChange:e=>Y(t=>({...t,isPeriod:e.target.checked,flow:e.target.checked?P[1]:""})),className:"w-4 h-4 sm:w-5 sm:h-5 text-rose-500 rounded"}),(0,l.jsx)(v.A,{className:"w-4 h-4 sm:w-5 sm:h-5 text-rose-500"}),(0,l.jsx)("span",{className:"text-sm sm:text-base font-medium text-gray-900",children:"Period day"})]})}),F.isPeriod&&(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Flow level"}),(0,l.jsx)("div",{className:"grid grid-cols-2 sm:flex gap-2",children:P.map(e=>(0,l.jsx)("button",{onClick:()=>Y(t=>({...t,flow:e})),className:`flex-1 py-2 px-2 sm:px-3 rounded-lg text-xs sm:text-sm font-medium transition-all capitalize
                              ${F.flow===e?"bg-rose-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e},e))})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2 sm:mb-3",children:"Symptoms"}),(0,l.jsx)("div",{className:"grid grid-cols-2 gap-2",children:k.map(e=>{let t=e.icon,s=F.symptoms.includes(e.id);return(0,l.jsxs)("button",{onClick:()=>{var t;return t=e.id,void Y(e=>({...e,symptoms:e.symptoms.includes(t)?e.symptoms.filter(e=>e!==t):[...e.symptoms,t]}))},className:`p-2 sm:p-3 rounded-lg text-left transition-all flex items-center gap-2
                              ${s?"bg-blue-50 border-2 border-blue-400":"bg-gray-50 border-2 border-transparent hover:bg-gray-100"}`,children:[(0,l.jsx)(t,{className:`w-3 h-3 sm:w-4 sm:h-4 ${s?e.color:"text-gray-400"}`}),(0,l.jsx)("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:e.label})]},e.id)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700 mb-2",children:"Notes"}),(0,l.jsx)("textarea",{value:F.notes,onChange:e=>Y(t=>({...t,notes:e.target.value})),placeholder:"Add any additional notes...",className:"w-full p-2 sm:p-3 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-rose-400 focus:border-transparent",rows:"3"})]}),(0,l.jsxs)("div",{className:"flex gap-2 sm:gap-3",children:[(0,l.jsx)("button",{disabled:F.isPeriod&&""==F.flow,onClick:G,className:"disabled:bg-gray-200 disabled:text-gray-400 disabled:cursor-not-allowed flex-1 bg-rose-500 text-white py-2.5 sm:py-3 rounded-lg text-sm sm:text-base font-medium hover:bg-rose-600 transition-colors",children:"Save"}),m[i]&&(0,l.jsx)("button",{onClick:J,className:"px-4 sm:px-6 py-2.5 sm:py-3 bg-gray-100 text-gray-700 rounded-lg text-sm sm:text-base font-medium hover:bg-gray-200 transition-colors",children:"Delete"})]})]})]})})})]})})},{}),(0,l.jsx)(i.N9,{position:"bottom-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!0,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"})]}))}},l={};function o(e){var t=l[e];if(void 0!==t)return t.exports;var s=l[e]={exports:{}};return a[e](s,s.exports,o),s.exports}o.m=a,o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e=[],o.O=(t,s,r,a)=>{if(s){a=a||0;for(var l=e.length;l>0&&e[l-1][2]>a;l--)e[l]=e[l-1];e[l]=[s,r,a];return}for(var n=1/0,l=0;l<e.length;l++){for(var[s,r,a]=e[l],i=!0,d=0;d<s.length;d++)(!1&a||n>=a)&&Object.keys(o.O).every(e=>o.O[e](s[d]))?s.splice(d--,1):(i=!1,a<n&&(n=a));if(i){e.splice(l--,1);var c=r();void 0!==c&&(t=c)}}return t},o.p="/",o.b=document.baseURI||self.location.href,t={410:0},o.O.j=e=>0===t[e],s=(e,s)=>{var r,a,[l,n,i]=s,d=0;if(l.some(e=>0!==t[e])){for(r in n)o.o(n,r)&&(o.m[r]=n[r]);if(i)var c=i(o)}for(e&&e(s);d<l.length;d++)a=l[d],o.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return o.O(c)},(r=self.webpackChunktide=self.webpackChunktide||[]).forEach(s.bind(null,0)),r.push=s.bind(null,r.push.bind(r));var n=o.O(void 0,["783","581"],()=>o(292));n=o.O(n)})();